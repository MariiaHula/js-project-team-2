{"mappings":"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","sources":["src/favorites.js"],"sourcesContent":["import './js/axios_api';\nimport './js/header';\nimport localStorage from './js/localStorage';\nimport { goitGlobalAPI } from './js/axios_api';\nimport { markupGalleryCard, checkFavorites } from './js/render-gallery';\nimport { openModalGaleryRecipesPre } from './js/modal-recipes';\nimport './js/modal-rating';\nimport Pagination from 'tui-pagination';\nimport '../node_modules/tui-pagination/dist/tui-pagination.css';  \n\n    import { Notify } from 'notiflix/build/notiflix-notify-aio';\nconst closeIconOrderModal = document.querySelector('.modal-order-close');\nconst windowOrderModal = document.querySelector('.modal-order-backdrop');\nconst openOrderBusket = document.querySelector('.header-busket-order');\nconst formOreder = document.querySelector('.modal-order-form');\nconst orderName = document.querySelector('#input_name');\nconst formEmail = document.querySelector('#input_email');\nconst formPhone = document.querySelector('#input_phone');\nconst formComment = document.querySelector('.user-message');\nconst orderSpinner = document.querySelector('.modal-order-loader');\nconst modalOrdBtn = document.querySelector('.modal-order-btn');\n\nopenOrderBusket.addEventListener('click', openOrderModal);\n\nfunction closeOrderModal(e) {\n  windowOrderModal.classList.remove('modal-order-backdrop-active');\n\n  closeIconOrderModal.removeEventListener('click', closeOrderModal);\n  windowOrderModal.removeEventListener('click', closeOrderByBcg);\n  window.removeEventListener('keydown', closeOrderByEsc);\n}\n\nfunction openOrderModal(e) {\n  windowOrderModal.classList.add('modal-order-backdrop-active');\n  closeIconOrderModal.addEventListener('click', closeOrderModal);\n  windowOrderModal.addEventListener('click', closeOrderByBcg);\n  window.addEventListener('keydown', closeOrderByEsc);\n}\n\nfunction closeOrderByBcg(e) {\n  if (e.target === windowOrderModal) {\n    closeOrderModal(e);\n  }\n}\n\nfunction closeOrderByEsc(e) {\n  if (e.key === 'Escape') {\n    closeOrderModal(e);\n  }\n}\n\nformOreder.addEventListener('submit', sendOrderForm);\n\nfunction sendOrderForm(e) {\n  e.preventDefault();\n\n  const addOrderApi = new goitGlobalAPI();\n  const dataAPI = {\n    name: orderName.value,\n    phone: formPhone.value,\n    email: formEmail.value,\n    comment: formComment.value,\n  };\n\n  orderSpinner.style.display = 'block';\n  modalOrdBtn.classList.add('non-active-btn');\n  setTimeout(() => {\n    addOrderFn(addOrderApi, dataAPI);\n\n    // Після завершення відправки, приховати спіннер\n    orderSpinner.style.display = 'none';\n    modalOrdBtn.classList.remove('non-active-btn');\n  }, 2000);\n}\n\nasync function addOrderFn(addOrderApi, dataAPI) {\n  try {\n    const data = await addOrderApi.createOrder(dataAPI);\n    // console.log(\"Order\", data);\n    Notify.success('We got your opinion!');\n    windowOrderModal.classList.remove('modal-order-backdrop-active');\n  } catch (err) {\n    console.log(`Error`, err);\n    Notify.failure('Oops, something wrong');\n    formOreder.reset();\n    windowOrderModal.classList.remove('modal-order-backdrop-active');\n  }\n}\n//===========RENDER from LOCALSTORAGE====================================\n\nconst favoriteList = document.querySelector('.favorites-list');\nconst favoritesWrapper = document.querySelector('.js-favorites-wrapper');\nconst blokedWrapper = document.querySelector('.js-bloked');\n\nlet favoritesGalleryAPI = new goitGlobalAPI(288);\nlet gallery_btn;\n\nasync function renderFavoritesCard() {\n  try {\n    let arrFav = localStorage.load('favorites-recipes');\n    let arrResult = null;\n\n    if (Array.isArray(arrFav)) {\n      const promises = arrFav.map(id => favoritesGalleryAPI.getRecipesById(id));\n\n      arrResult = await Promise.all(promises);\n    } else {\n      arrResult = [];\n      blokedWrapper.classList.remove('is-hidden');\n    }\n\n    const categories = faveritesCategory(arrResult);\n    favoritesWrapper.innerHTML = categories;\n    favoriteList.innerHTML = markupGalleryCard(arrResult);\n\n    if (categories === '') {\n      Notify.failure('There is no such recipe in the favorites');\n      return;\n    }\n\n    blokedWrapper.classList.add('is-hidden');\n    checkFavorites('.favorites-list');\n\n    const buttons = favoritesWrapper.children;\n\n    for (li of buttons) {\n      let button = li.children[0];\n\n      button.addEventListener('click', event => {\n        let element = event.target;\n\n        if (element.dataset['category'] !== 'All categories') {\n          let recipesFiltered = arrResult.filter(el => {\n            return el.category === element.dataset['category'];\n          });\n          favoriteList.innerHTML = markupGalleryCard(recipesFiltered);\n        } else {\n          favoriteList.innerHTML = markupGalleryCard(arrResult);\n        }\n\n        checkFavorites('.favorites-list');\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  gallery_btn = document.querySelector('.favorites-list');\n  gallery_btn.addEventListener('click', openModalGaleryRecipesPre);\n}\n\nrenderFavoritesCard();\n\nfunction faveritesCategory(arr) {\n  let categories = ['All categories'];\n\n  if (Array.isArray(arr) && arr.length > 0) {\n    categories = categories.concat(\n      arr\n        .map(element => element.category)\n        .filter((elem, ind, arr) => {\n          return arr.indexOf(elem) === ind;\n        })\n    );\n  } else {\n    return '';\n  }\n\n  const markup = categories\n    .map(el => {\n      return `\n        <li>\n        <button class=\"favorites-btn\" type=\"button\" data-category=\"${el}\">${el}</button>\n        </li>`;\n    })\n    .join('');\n\n  return markup;\n}\n"],"names":["$bpxeT","parcelRequire","$f872ae3cf3d9dd7f$var$closeIconOrderModal","document","querySelector","$f872ae3cf3d9dd7f$var$windowOrderModal","$f872ae3cf3d9dd7f$var$openOrderBusket","$f872ae3cf3d9dd7f$var$formOreder","$f872ae3cf3d9dd7f$var$orderName","$f872ae3cf3d9dd7f$var$formEmail","$f872ae3cf3d9dd7f$var$formPhone","$f872ae3cf3d9dd7f$var$formComment","$f872ae3cf3d9dd7f$var$orderSpinner","$f872ae3cf3d9dd7f$var$modalOrdBtn","$f872ae3cf3d9dd7f$var$closeOrderModal","e","classList","remove","removeEventListener","$f872ae3cf3d9dd7f$var$closeOrderByBcg","window","$f872ae3cf3d9dd7f$var$closeOrderByEsc","target","key","$f872ae3cf3d9dd7f$var$_addOrderFn","$parcel$interopDefault","$2TvXO","mark","_callee","addOrderApi","dataAPI","createOrder","_ctx","sent","$h6c0i","Notify","success","console","log","t0","failure","reset","apply","this","arguments","addEventListener","add","preventDefault","$iVM7n","goitGlobalAPI","name","value","phone","email","comment","style","display","setTimeout","$f872ae3cf3d9dd7f$var$addOrderFn","$f872ae3cf3d9dd7f$var$favoriteList","$f872ae3cf3d9dd7f$var$favoritesWrapper","$f872ae3cf3d9dd7f$var$blokedWrapper","$f872ae3cf3d9dd7f$var$favoritesGalleryAPI","$f872ae3cf3d9dd7f$var$_renderFavoritesCard","arrFav","arrResult","promises","categories","buttons","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","$UL92Z","default","load","Array","isArray","map","id","getRecipesById","Promise","all","$f872ae3cf3d9dd7f$var$faveritesCategory","innerHTML","$faNkY","markupGalleryCard","checkFavorites","children","undefined","Symbol","iterator","next","done","li","event","element","dataset","recipesFiltered","filter","el","category","return","t1","$fzILn","openModalGaleryRecipesPre","arr1","length","concat","elem","ind","arr","indexOf","join","$f872ae3cf3d9dd7f$var$renderFavoritesCard"],"version":3,"file":"favorites.4fd7b1ac.js.map"}