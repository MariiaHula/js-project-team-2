{"mappings":"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","sources":["src/favorites.js"],"sourcesContent":["import './js/axios_api';\nimport './js/header';\nimport localStorage from './js/localStorage';\nimport { goitGlobalAPI } from './js/axios_api';\nimport { markupGalleryCard, checkFavorites } from './js/render-gallery';\nimport { openModalGaleryRecipesPre } from './js/modal-recipes';\nimport './js/modal-rating';\nimport Pagination from 'tui-pagination';\nimport '../node_modules/tui-pagination/dist/tui-pagination.css';  \n\n    import { Notify } from 'notiflix/build/notiflix-notify-aio';\nconst closeIconOrderModal = document.querySelector('.modal-order-close');\nconst windowOrderModal = document.querySelector('.modal-order-backdrop');\nconst openOrderBusket = document.querySelector('.header-busket-order');\nconst formOreder = document.querySelector('.modal-order-form');\nconst orderName = document.querySelector('#input_name');\nconst formEmail = document.querySelector('#input_email');\nconst formPhone = document.querySelector('#input_phone');\nconst formComment = document.querySelector('.user-message');\nconst orderSpinner = document.querySelector('.modal-order-loader');\nconst modalOrdBtn = document.querySelector('.modal-order-btn');\n\nopenOrderBusket.addEventListener('click', openOrderModal);\n\nfunction closeOrderModal(e) {\n  windowOrderModal.classList.remove('modal-order-backdrop-active');\n\n  closeIconOrderModal.removeEventListener('click', closeOrderModal);\n  windowOrderModal.removeEventListener('click', closeOrderByBcg);\n  window.removeEventListener('keydown', closeOrderByEsc);\n}\n\nfunction openOrderModal(e) {\n  windowOrderModal.classList.add('modal-order-backdrop-active');\n  closeIconOrderModal.addEventListener('click', closeOrderModal);\n  windowOrderModal.addEventListener('click', closeOrderByBcg);\n  window.addEventListener('keydown', closeOrderByEsc);\n}\n\nfunction closeOrderByBcg(e) {\n  if (e.target === windowOrderModal) {\n    closeOrderModal(e);\n  }\n}\n\nfunction closeOrderByEsc(e) {\n  if (e.key === 'Escape') {\n    closeOrderModal(e);\n  }\n}\n\nformOreder.addEventListener('submit', sendOrderForm);\n\nfunction sendOrderForm(e) {\n  e.preventDefault();\n\n  const addOrderApi = new goitGlobalAPI();\n  const dataAPI = {\n    name: orderName.value,\n    phone: formPhone.value,\n    email: formEmail.value,\n    comment: formComment.value,\n  };\n\n  orderSpinner.style.display = 'block';\n  modalOrdBtn.classList.add('non-active-btn');\n  setTimeout(() => {\n    addOrderFn(addOrderApi, dataAPI);\n\n    // Після завершення відправки, приховати спіннер\n    orderSpinner.style.display = 'none';\n    modalOrdBtn.classList.remove('non-active-btn');\n  }, 2000);\n}\n\nasync function addOrderFn(addOrderApi, dataAPI) {\n  try {\n    const data = await addOrderApi.createOrder(dataAPI);\n    // console.log(\"Order\", data);\n    Notify.success('We got your opinion!');\n    windowOrderModal.classList.remove('modal-order-backdrop-active');\n  } catch (err) {\n    console.log(`Error`, err);\n    Notify.failure('Oops, something wrong');\n    formOreder.reset();\n    windowOrderModal.classList.remove('modal-order-backdrop-active');\n  }\n}\n//===========RENDER from LOCALSTORAGE====================================\n\nconst favoriteList = document.querySelector('.favorites-list');\nconst favoritesWrapper = document.querySelector('.js-favorites-wrapper');\nconst blokedWrapper = document.querySelector('.js-bloked');\n\nlet favoritesGalleryAPI = new goitGlobalAPI(288);\nlet gallery_btn;\n\nasync function renderFavoritesCard() {\n  try {\n    let arrFav = localStorage.load('favorites-recipes');\n    let arrResult = null;\n\n    if (Array.isArray(arrFav)) {\n      const promises = arrFav.map(id => favoritesGalleryAPI.getRecipesById(id));\n\n      arrResult = await Promise.all(promises);\n    } else {\n      arrResult = [];\n      blokedWrapper.classList.remove('is-hidden');\n    }\n\n    const categories = faveritesCategory(arrResult);\n    favoritesWrapper.innerHTML = categories;\n    favoriteList.innerHTML = markupGalleryCard(arrResult);\n\n    if (categories === '') {\n      Notify.failure('There is no such recipe in the favorites');\n      return;\n    }\n\n    blokedWrapper.classList.add('is-hidden');\n    checkFavorites('.favorites-list');\n\n    const buttons = favoritesWrapper.children;\n\n    for (li of buttons) {\n      let button = li.children[0];\n\n      button.addEventListener('click', event => {\n        let element = event.target;\n\n        if (element.dataset['category'] !== 'All categories') {\n          let recipesFiltered = arrResult.filter(el => {\n            return el.category === element.dataset['category'];\n          });\n          favoriteList.innerHTML = markupGalleryCard(recipesFiltered);\n        } else {\n          favoriteList.innerHTML = markupGalleryCard(arrResult);\n        }\n\n        checkFavorites('.favorites-list');\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  gallery_btn = document.querySelector('.favorites-list');\n  gallery_btn.addEventListener('click', openModalGaleryRecipesPre);\n}\n\nrenderFavoritesCard();\n\nfunction faveritesCategory(arr) {\n  let categories = ['All categories'];\n\n  if (Array.isArray(arr) && arr.length > 0) {\n    categories = categories.concat(\n      arr\n        .map(element => element.category)\n        .filter((elem, ind, arr) => {\n          return arr.indexOf(elem) === ind;\n        })\n    );\n  } else {\n    return '';\n  }\n\n  const markup = categories\n    .map(el => {\n      return `\n        <li>\n        <button class=\"favorites-btn\" type=\"button\" data-category=\"${el}\">${el}</button>\n        </li>`;\n    })\n    .join('');\n\n  return markup;\n}\n"],"names":["$da7oM","parcelRequire","$5680453e957fa117$var$closeIconOrderModal","document","querySelector","$5680453e957fa117$var$windowOrderModal","$5680453e957fa117$var$openOrderBusket","$5680453e957fa117$var$formOreder","$5680453e957fa117$var$orderName","$5680453e957fa117$var$formEmail","$5680453e957fa117$var$formPhone","$5680453e957fa117$var$formComment","$5680453e957fa117$var$orderSpinner","$5680453e957fa117$var$modalOrdBtn","$5680453e957fa117$var$closeOrderModal","e","classList","remove","removeEventListener","$5680453e957fa117$var$closeOrderByBcg","window","$5680453e957fa117$var$closeOrderByEsc","target","key","addEventListener","add","preventDefault","addOrderApi","goitGlobalAPI","dataAPI","name","value","phone","email","comment","style","display","setTimeout","async","createOrder","$iQIUW","Notify","success","err","console","log","failure","reset","$5680453e957fa117$var$addOrderFn","$5680453e957fa117$var$favoriteList","$5680453e957fa117$var$favoritesWrapper","$5680453e957fa117$var$blokedWrapper","$5680453e957fa117$var$gallery_btn","$5680453e957fa117$var$favoritesGalleryAPI","arrFav","$31u3U","default","load","arrResult","Array","isArray","promises","map","id","getRecipesById","Promise","all","categories","arr1","length","concat","element","category","filter","elem","ind","arr","indexOf","el","join","$5680453e957fa117$var$faveritesCategory","innerHTML","$34HY9","markupGalleryCard","checkFavorites","buttons","children","li","event","dataset","recipesFiltered","$2H64r","openModalGaleryRecipesPre","$5680453e957fa117$var$renderFavoritesCard"],"version":3,"file":"favorites.a113319f.js.map"}