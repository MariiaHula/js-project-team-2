{"mappings":"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","sources":["src/favorites.js"],"sourcesContent":["import './js/axios_api';\nimport './js/header';\nimport localStorage from './js/localStorage';\nimport { goitGlobalAPI } from './js/axios_api';\nimport { markupGalleryCard, checkFavorites } from './js/render-gallery';\nimport { openModalGaleryRecipesPre } from './js/modal-recipes';\nimport './js/modal-rating';\nimport Pagination from 'tui-pagination';\nimport '../node_modules/tui-pagination/dist/tui-pagination.css';  \n\n    import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { event, nodeName } from 'jquery';\nconst closeIconOrderModal = document.querySelector('.modal-order-close');\nconst windowOrderModal = document.querySelector('.modal-order-backdrop');\nconst openOrderBusket = document.querySelector('.header-busket-order');\nconst formOreder = document.querySelector('.modal-order-form');\nconst orderName = document.querySelector('#input_name');\nconst formEmail = document.querySelector('#input_email');\nconst formPhone = document.querySelector('#input_phone');\nconst formComment = document.querySelector('.user-message');\nconst orderSpinner = document.querySelector('.modal-order-loader');\nconst modalOrdBtn = document.querySelector('.modal-order-btn');\n\nopenOrderBusket.addEventListener('click', openOrderModal);\n\nfunction closeOrderModal(e) {\n  windowOrderModal.classList.remove('modal-order-backdrop-active');\n\n  closeIconOrderModal.removeEventListener('click', closeOrderModal);\n  windowOrderModal.removeEventListener('click', closeOrderByBcg);\n  window.removeEventListener('keydown', closeOrderByEsc);\n}\n\nfunction openOrderModal(e) {\n  windowOrderModal.classList.add('modal-order-backdrop-active');\n  closeIconOrderModal.addEventListener('click', closeOrderModal);\n  windowOrderModal.addEventListener('click', closeOrderByBcg);\n  window.addEventListener('keydown', closeOrderByEsc);\n}\n\nfunction closeOrderByBcg(e) {\n  if (e.target === windowOrderModal) {\n    closeOrderModal(e);\n  }\n}\n\nfunction closeOrderByEsc(e) {\n  if (e.key === 'Escape') {\n    closeOrderModal(e);\n  }\n}\n\nformOreder.addEventListener('submit', sendOrderForm);\n\nfunction sendOrderForm(e) {\n  e.preventDefault();\n\n  const addOrderApi = new goitGlobalAPI();\n  const dataAPI = {\n    name: orderName.value,\n    phone: formPhone.value,\n    email: formEmail.value,\n    comment: formComment.value,\n  };\n\n  orderSpinner.style.display = 'block';\n  modalOrdBtn.classList.add('non-active-btn');\n  setTimeout(() => {\n    addOrderFn(addOrderApi, dataAPI);\n\n    // Після завершення відправки, приховати спіннер\n    orderSpinner.style.display = 'none';\n    modalOrdBtn.classList.remove('non-active-btn');\n  }, 2000);\n}\n\nasync function addOrderFn(addOrderApi, dataAPI) {\n  try {\n    const data = await addOrderApi.createOrder(dataAPI);\n    // console.log(\"Order\", data);\n    Notify.success('We got your opinion!');\n    windowOrderModal.classList.remove('modal-order-backdrop-active');\n  } catch (err) {\n    console.log(`Error`, err);\n    Notify.failure('Oops, something wrong');\n    formOreder.reset();\n    windowOrderModal.classList.remove('modal-order-backdrop-active');\n  }\n}\n//===========RENDER from LOCALSTORAGE====================================\n\nconst favoriteList = document.querySelector('.favorites-list');\nconst favoritesWrapper = document.querySelector('.js-favorites-wrapper');\nconst blokedWrapper = document.querySelector('.js-bloked');\n\nlet favoritesGalleryAPI = new goitGlobalAPI(288);\nlet gallery_btn;\n\nasync function renderFavoritesCard() {\n  try {\n    let arrFav = localStorage.load('favorites-recipes');\n    let arrResult = null;\n\n    if (Array.isArray(arrFav)) {\n      const promises = arrFav.map(id => favoritesGalleryAPI.getRecipesById(id));\n\n      arrResult = await Promise.all(promises);\n    } else {\n      arrResult = [];\n      blokedWrapper.classList.remove('is-hidden');\n    }\n\n    const categories = faveritesCategory(arrResult);\n    favoritesWrapper.innerHTML = categories;\n    favoriteList.innerHTML = markupGalleryCard(arrResult);\n\n    if (categories === '') {\n      Notify.failure('There is no such recipe in the favorites');\n      return;\n    }\n\n    blokedWrapper.classList.add('is-hidden');\n    checkFavorites('.favorites-list');\n\n    favoritesWrapper.addEventListener('click', event => {\n      if (event.target.nodeName !== 'BUTTON') {\n        return;\n      }\n\n      let element = event.target;\n\n      if (element.dataset['category'] !== 'All categories') {\n        let recipesFiltered = arrResult.filter(el => {\n          return el.category === element.dataset['category'];\n        });\n        favoriteList.innerHTML = markupGalleryCard(recipesFiltered);\n      } else {\n        favoriteList.innerHTML = markupGalleryCard(arrResult);\n      }\n\n      checkFavorites('.favorites-list');\n    });\n  } catch (err) {\n    console.log(err);\n  }\n\n  gallery_btn = document.querySelector('.favorites-list');\n  gallery_btn.addEventListener('click', openModalGaleryRecipesPre);\n}\n\nrenderFavoritesCard();\n\nfunction faveritesCategory(arr) {\n  let categories = ['All categories'];\n\n  if (Array.isArray(arr) && arr.length > 0) {\n    categories = categories.concat(\n      arr\n        .map(element => element.category)\n        .filter((elem, ind, arr) => {\n          return arr.indexOf(elem) === ind;\n        })\n    );\n  } else {\n    return '';\n  }\n\n  const markup = categories\n    .map(el => {\n      return `\n        <li>\n        <button class=\"favorites-btn\" type=\"button\" data-category=\"${el}\">${el}</button>\n        </li>`;\n    })\n    .join('');\n\n  return markup;\n}\n"],"names":["$bpxeT","parcelRequire","$f872ae3cf3d9dd7f$var$closeIconOrderModal","document","querySelector","$f872ae3cf3d9dd7f$var$windowOrderModal","$f872ae3cf3d9dd7f$var$openOrderBusket","$f872ae3cf3d9dd7f$var$formOreder","$f872ae3cf3d9dd7f$var$orderName","$f872ae3cf3d9dd7f$var$formEmail","$f872ae3cf3d9dd7f$var$formPhone","$f872ae3cf3d9dd7f$var$formComment","$f872ae3cf3d9dd7f$var$orderSpinner","$f872ae3cf3d9dd7f$var$modalOrdBtn","$f872ae3cf3d9dd7f$var$closeOrderModal","e","classList","remove","removeEventListener","$f872ae3cf3d9dd7f$var$closeOrderByBcg","window","$f872ae3cf3d9dd7f$var$closeOrderByEsc","target","key","$f872ae3cf3d9dd7f$var$_addOrderFn","$parcel$interopDefault","$2TvXO","mark","_callee","addOrderApi","dataAPI","createOrder","_ctx","sent","$h6c0i","Notify","success","console","log","t0","failure","reset","apply","this","arguments","addEventListener","add","preventDefault","$iVM7n","goitGlobalAPI","name","value","phone","email","comment","style","display","setTimeout","$f872ae3cf3d9dd7f$var$addOrderFn","$f872ae3cf3d9dd7f$var$favoriteList","$f872ae3cf3d9dd7f$var$favoritesWrapper","$f872ae3cf3d9dd7f$var$blokedWrapper","$f872ae3cf3d9dd7f$var$favoritesGalleryAPI","$f872ae3cf3d9dd7f$var$_renderFavoritesCard","arrFav","arrResult","promises","categories","$UL92Z","default","load","Array","isArray","map","id","getRecipesById","Promise","all","$f872ae3cf3d9dd7f$var$faveritesCategory","innerHTML","$faNkY","markupGalleryCard","checkFavorites","event1","nodeName","element","dataset","recipesFiltered","filter","el","category","$fzILn","openModalGaleryRecipesPre","arr1","length","concat","elem","ind","arr","indexOf","join","$f872ae3cf3d9dd7f$var$renderFavoritesCard"],"version":3,"file":"favorites.31f6fd5e.js.map"}