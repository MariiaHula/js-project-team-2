{"mappings":"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","sources":["src/favorites.js"],"sourcesContent":["import './js/axios_api';\nimport './js/header';\nimport localStorage from './js/localStorage';\nimport { goitGlobalAPI } from './js/axios_api';\nimport { checkFavorites } from './js/render-gallery';\nimport { renderAllRecipes } from './js/categories';\nimport Pagination from 'tui-pagination';\nimport '../node_modules/tui-pagination/dist/tui-pagination.css';  \n\n    import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst closeIconOrderModal = document.querySelector('.modal-order-close');\nconst windowOrderModal = document.querySelector('.modal-order-backdrop');\nconst openOrderBusket = document.querySelector('.header-busket-order');\nconst formOreder = document.querySelector('.modal-order-form');\nconst orderName = document.querySelector('#input_name');\nconst formEmail = document.querySelector('#input_email');\nconst formPhone = document.querySelector('#input_phone');\nconst formComment = document.querySelector('.user-message');\nconst orderSpinner = document.querySelector('.modal-order-loader');\nconst modalOrdBtn = document.querySelector('.modal-order-btn');\n\n\n\nopenOrderBusket.addEventListener('click', openOrderModal);\n\n\n\n\nfunction closeOrderModal(e) {\n    windowOrderModal.classList.remove('modal-order-backdrop-active'); \n\n     closeIconOrderModal.removeEventListener(\"click\", closeOrderModal);\n    windowOrderModal.removeEventListener(\"click\", closeOrderByBcg);\n    window.removeEventListener(\"keydown\", closeOrderByEsc);\n}\n\nfunction openOrderModal(e) {\n    windowOrderModal.classList.add('modal-order-backdrop-active'); \n    closeIconOrderModal.addEventListener('click', closeOrderModal);\n     windowOrderModal.addEventListener('click', closeOrderByBcg);\n    window.addEventListener('keydown', closeOrderByEsc)\n}\n\nfunction closeOrderByBcg(e) {\n    if (e.target === windowOrderModal) {\n        closeOrderModal(e);\n     }\n}\n\nfunction closeOrderByEsc(e) {\n     if (e.key === \"Escape\") {\n        closeOrderModal(e);\n    }\n}\n\n\n\nformOreder.addEventListener('submit', sendOrderForm);\n\nfunction sendOrderForm(e) {\n     \n    e.preventDefault();\n \n        const addOrderApi = new goitGlobalAPI();\n        const dataAPI = {\n            \"name\": orderName.value,\n  \"phone\": formPhone.value,\n  \"email\": formEmail.value,\n  \"comment\": formComment.value,\n    }\n\n\n     orderSpinner.style.display = 'block';\n    modalOrdBtn.classList.add('non-active-btn');\n     setTimeout(() => {\n        addOrderFn(addOrderApi, dataAPI);\n\n        // Після завершення відправки, приховати спіннер\n         orderSpinner.style.display = 'none';\n         modalOrdBtn.classList.remove('non-active-btn');\n    }, 2000);\n    \n    }\n\n    async function addOrderFn(addOrderApi, dataAPI) {\n    \n            try {\n                const data = await addOrderApi.createOrder(dataAPI);\n                // console.log(\"Order\", data);\n                Notify.success('We got your opinion!');\n   windowOrderModal.classList.remove('modal-order-backdrop-active');\n        \n            }\n            catch (err) {\n                console.log(`Error`, err);\n                Notify.failure('Oops, something wrong');\n                formOreder.reset();\n                windowOrderModal.classList.remove('modal-order-backdrop-active');\n            }\n    \n} \n//===========RENDER from LOCALSTORAGE====================================\n\nconst favoriteList = document.querySelector('.favorites-list');\nconst favoritesWrapper = document.querySelector('.js-favorites-wrapper');\nconst blokedWrapper = document.querySelector('.js-bloked');\n\nlet favoritesGalleryAPI = new goitGlobalAPI(288);\n\nasync function renderFavoritesCard() {\n    \n    try {\n        const response = await favoritesGalleryAPI.getRecipes();\n\n        let arrFav = localStorage.load('favorites-recipes');\n        let arrResult = response.results;\n\n        if (Array.isArray(arrFav)) {\n            arrResult = arrResult.filter(element => {\n                return arrFav.includes(String(element._id)); \n            })\n        } else {\n          arrResult = [];\n          blokedWrapper.classList.remove('is-hidden');\n        }\n\n      const categories = faveritesCategory(arrResult);\n      favoritesWrapper.innerHTML = categories;\n      favoriteList.innerHTML = markupGalleryCard(arrResult);\n      if (categories === '') {\n        return;\n      }\n      blokedWrapper.classList.add('is-hidden');\n      checkFavorites('.favorites-list');\n       \n      const buttons = favoritesWrapper.children;\n      for (li of buttons) {\n        let button = li.children[0];\n        button.addEventListener('click', event => {\n          let element = event.target;\n\n          if (element.dataset['category'] !== 'All categories') {\n            let recipesFiltered = arrResult.filter(el => {\n              el.category === element.dataset['category']\n            });\n            favoriteList.innerHTML = markupGalleryCard(recipesFiltered);\n          } else {\n            favoriteList.innerHTML = markupGalleryCard(arrResult);\n          }\n          checkFavorites('.favorites-list');\n        })\n      }\n\n\n    const options = {\n        totalItems: response.results.length * response.totalPages,\n        itemsPerPage: favoritesGalleryAPI.perPage,\n        visiblePages: 3,\n        page: favoritesGalleryAPI.page,\n    }\n\n    const pagination = new Pagination('pagination', options);\n        \n    pagination.on('afterMove', async event => {\n       favoritesGalleryAPI.page = event.page;\n      try {\n          const response = await favoritesGalleryAPI.getRecipes();\n        let arrFav = localStorage.load('favorites-recipes');\n        let arrResult = response.results;\n       \n        if (Array.isArray(arrFav)) {\n            arrResult = arrResult.filter(element => {\n                return arrFav.includes(String(element._id)); \n            })\n        }\n        favoriteList.innerHTML = markupGalleryCard(arrResult);\n\n           checkFavorites('.favorites-list');\n      } catch (err) {\n        console.log(err);\n      }\n    });\n  } catch (err) {\n    console.log(err);\n  }\n}\nrenderFavoritesCard();\n\nfunction faveritesCategory(arr) {\n\n  let categories = ['All categories'];\n\n  if (Array.isArray(arr) && arr.length > 0) {\n      categories = categories.concat(\n      arr.map(element => element.category).filter((elem, ind, arr) => { return arr.indexOf(elem) === ind })\n    );\n  } else {\n    return '';\n  }\n  const markup = categories.map(el => {\n    return `\n        <li>\n        <button class=\"favorites-category-btn\" type=\"button\" data-category=\"${el}\">${el}</button>\n        </li>`;\n  })\n    .join('');\n  return markup;\n}\n\n\n"],"names":["$bpxeT","parcelRequire","$f872ae3cf3d9dd7f$var$closeIconOrderModal","document","querySelector","$f872ae3cf3d9dd7f$var$windowOrderModal","$f872ae3cf3d9dd7f$var$openOrderBusket","$f872ae3cf3d9dd7f$var$formOreder","$f872ae3cf3d9dd7f$var$orderName","$f872ae3cf3d9dd7f$var$formEmail","$f872ae3cf3d9dd7f$var$formPhone","$f872ae3cf3d9dd7f$var$formComment","$f872ae3cf3d9dd7f$var$orderSpinner","$f872ae3cf3d9dd7f$var$modalOrdBtn","$f872ae3cf3d9dd7f$var$closeOrderModal","e","classList","remove","removeEventListener","$f872ae3cf3d9dd7f$var$closeOrderByBcg","window","$f872ae3cf3d9dd7f$var$closeOrderByEsc","target","key","$f872ae3cf3d9dd7f$var$_addOrderFn","$parcel$interopDefault","$2TvXO","mark","_callee","addOrderApi","dataAPI","createOrder","_ctx","sent","$h6c0i","Notify","success","console","log","t0","failure","reset","apply","this","arguments","addEventListener","add","preventDefault","$iVM7n","goitGlobalAPI","name","value","phone","email","comment","style","display","setTimeout","$f872ae3cf3d9dd7f$var$addOrderFn","$f872ae3cf3d9dd7f$var$favoriteList","$f872ae3cf3d9dd7f$var$favoritesWrapper","$f872ae3cf3d9dd7f$var$blokedWrapper","$f872ae3cf3d9dd7f$var$favoritesGalleryAPI","$f872ae3cf3d9dd7f$var$_renderFavoritesCard","_callee1","response1","arrFav1","arrResult1","categories","buttons","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","options","getRecipes","_ctx1","$UL92Z","default","load","results","Array","isArray","filter","element","includes","String","_id","$f872ae3cf3d9dd7f$var$faveritesCategory","innerHTML","markupGalleryCard","$faNkY","checkFavorites","children","undefined","Symbol","iterator","next","done","li","event","dataset","recipesFiltered","el","category","return","totalItems","length","totalPages","itemsPerPage","perPage","visiblePages","page","$1VFfL","on","response","arrFav","arrResult","t1","arr1","concat","map","elem","ind","arr","indexOf","join","$f872ae3cf3d9dd7f$var$renderFavoritesCard"],"version":3,"file":"favorites.14ac54fe.js.map"}